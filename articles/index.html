<!DOCTYPE html>
<html>

<head>
    <title>The Spanakopita</title>
    <link rel="shortcut icon" type="image/png" href="../images/cashclublogo.png"/>

    <!-- Styles -->
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="../css/footerStyles.css">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@300;400;600;700;900&display=swap" rel="stylesheet">

    <!-- Other -->
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://kit.fontawesome.com/81f93d9156.js" crossorigin="anonymous"></script>
    <script type="module" src="script.js"></script>
    <meta charset="utf-8">

    <script type='module'>

         /* Where we are putting the cards */
         const $main = document.querySelector('main');

         /* Finding the input elements and putting them into variables */
         const $sortInputs = document.querySelectorAll('input[name=sort]')
         const $riskInputs = document.querySelectorAll('input[name=risk]')


         /* The variable to store the data */
         let data;

         /* Function to sort the data */
         function sort(e) {
         	if(this.value === 'up') {
         		data.sort((a, b) => a.commonName > b.commonName ? -1 : 1);
         	} else {
         		data.sort((a, b) => a.commonName > b.commonName ? 1 : -1);
         	}

         	bindData(data)
         }

         /* Function to filter the data */
         function filter(e) {
         	let filteredData;
         	if(this.value === 'all') {
         		filteredData = data;
         	} else {
         		filteredData = data.filter(item => item.conservationStatus === this.value)
         	}
         	bindData(filteredData);
         }

         /* Function to bind a card */
         function bindItem(item) {
         	/* Creating a new div element */
         	const div = document.createElement('div');

         	/* Injecting data into the template of our card */
         	const card = `
 					<img src='${item.images}'>
 					<h3>${item.commonName}</h3>
 					<h4>${item.conservationStatus}</h4>
 					<a href='${item.links}'>Learn More</a>`;

         	/* Injecting the template into our div*/
         	div.innerHTML = card;

         	/* Adding the card to the main element */
         	$main.appendChild(div);
         }

         /* Function to bind all the cards to the data */
         function bindData(data) {

         	/* Clearing out the contents in the main section */
         	$main.innerHTML = '';

         	/* Looping through each card and binding it to html */
         	data.forEach(bindItem);

         }

         async function fetchData() {
         	/* Making the request for `data.json` */
             const response = await fetch('../data.json');

         	/* Converting the data into a `Javascript Object` */
             const json = await response.json();

         	/* Storing the data into our variable */
             data = json;

         	/* Calling Bind Data */
         	bindData(data)
         }

         /* Looping through each element and adding a click event listener */
         $sortInputs.forEach(input => input.addEventListener('click', sort));
         $riskInputs.forEach(input => input.addEventListener('click', filter));

         fetchData();

     </script>
</head>

<body>
    <div class="mainContent2">
        <header class="siteNavHeader">
            <a href="../" class="navTitleRef">
                <h1 class="navMainTitle">The Spanakopita</h1>
            </a>
            <nav class="navbarItems">
                <ul class="navbarLinks">
                    <li><a href="../index.html">Home</a></li>
                    <li><a href="../articles/index.html">Articles</a></li>
                    <li><a href="../about/index.html">About</a></li>
                </ul>
            </nav>
        </header>

        <div class="topicsBackgroundDiv">
            <section class="topicsBackgroundSection">
                <article>
                    <span class="topicsTitle">
                        Articles
                    </span>
                </article>

                <article>
                    <span class="topicsSubTitle">
                        Take a Look at all the Past Articles!
                    </span>
                </article>
                <main>
                  <div>
            				<img src='../images\IMG_4326.jpg' >
            				<h3>Tug of War</h3>
            				<h4 style="color: black;">Welcome to the Spanakopita Review. Today we will be covering the controversial Tug-Of-War game that took place on October 11, 2021.</h4>
            				<a href='../individualArticles\article1.html'>Continue Reading...</a>
            			</div>
                  <div>
            				<img src='../images\IMG_4530.jfif' >
            				<h3>Campus Trees To Be Modernized With Plastic Replacements</h3>
            				<h4 style="color: black;">Gunn will replace all the real trees on campus with plastic ones. Ever since Gunn made the decision to switch from natural to plastic grass, the school has saved immensely on water bills.</h4>
            				<a href='../individualArticles\Article2'>Continue Reading...</a>
                  </div>
                </main>
                <article>
                    <!-- empty -->
                </article>
            </section>
        </div>

    <section class="mainFooterSection">
        <article>
            <section class="footerSection">
                <article>
                    <a href="">
                        <img src="images/SpanakopitaLogo.jpg" width="70" height="70" alt="GCCC logo">
                    </a>
                </article>

                <article>
                    <p class="footerSectionTitles">Community</p>
                    <a href="https://discord.gg/t5VS9HmVSS">Discord</a><br>
                </article>

                <article>
                    <p class="footerSectionTitles">Join</p>
                    <a href="">Sign up Form</a><br>
                </article>

                <article>
                    <p class="footerSectionTitles">About</p>
                    <a href="./about/index.html">Our Mission</a><br>
                </article>
            </section>
        </article>

        <article class="footerDivider">
            <div class="footerDivider">
            </div>
        </article>

        <article>
            <p class="footerCopyRight">
                The Spanakopita
            </p>
        </article>
    </section>

</body>

</html>
